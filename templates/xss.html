{% extends 'base.html' %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto;">

    <div style="text-align: center; margin-bottom: 30px;">
        <h1 style="color: #2c3e50; margin-bottom: 10px;">üí¨ XSS & File Upload Lab</h1>
        <p style="color: #7f8c8d;">–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –ø–µ–π–ª–æ–∞–¥, –∞ –ø–æ—Ç—ñ–º –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É –∑–Ω–∏–∑—É, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</p>
    </div>

    <div class="box" style="border-left: 5px solid #3498db;">
        <h3 style="margin-top:0; color: #3498db;">üí¨ Stored XSS (–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ)</h3>
        <form method="post" action="/" class="ajax-form">
            <div style="display: flex; gap: 10px;">
                <input type="text" name="content" style="flex: 1; padding: 12px; border: 2px solid #bdc3c7; border-radius: 4px;" placeholder="–í—Å—Ç–∞–≤—Ç–µ —Å–∫—Ä–∏–ø—Ç (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: <script>alert(1)</script>)..." required>
                <button type="submit" class="btn btn-blue" style="width: 200px;">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ Payload</button>
            </div>
        </form>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
        
        <div class="box" style="border-top: 5px solid #e74c3c; background-color: #fff9f9;">
            <h3 style="color: #c0392b; margin-top:0;">üìÇ –í—Ä–∞–∑–ª–∏–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</h3>
            <div class="file-rules rules-danger">‚ö†Ô∏è –î–û–ó–í–û–õ–ï–ù–û –í–°–ï (HTML, JS, EXE)</div>
            
            <form method="post" action="/upload_vulnerable" enctype="multipart/form-data" class="ajax-form">
                <input type="file" name="file" style="margin-bottom: 10px; width: 100%;">
                <button type="submit" class="btn btn-red btn-full">Upload (Unsafe)</button>
            </form>
            
            <div class="separator"><span>–ê–ë–û –û–ë–ï–†–Ü–¢–¨ –í–Ü–†–£–°</span></div>
            
            <form method="post" action="/upload_preset" class="ajax-form">
                <input type="hidden" name="mode" value="vulnerable">
                <select name="filename" class="form-select">
                    {% for file in preset_files %}
                        <option value="{{ file }}">ü¶† {{ file }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="btn btn-orange btn-full">Inject Preset</button>
            </form>

            <div style="margin-top: 15px;">
                <form method="post" action="/inject_all" class="ajax-form">
                    <button type="submit" class="btn btn-purple btn-full">üíÄ INJECT ALL VIRUSES üíÄ</button>
                </form>
            </div>
        </div>

        <div class="box" style="border-top: 5px solid #27ae60; background-color: #fafffc;">
            <h3 style="color: #1e8449; margin-top:0;">üîí –ó–∞—Ö–∏—â–µ–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</h3>
            <div class="file-rules rules-success">‚úÖ –¢–Ü–õ–¨–ö–ò –ë–ï–ó–ü–ï–ß–ù–Ü (IMG/PDF)</div>
            
            <form method="post" action="/upload_secure" enctype="multipart/form-data" class="ajax-form">
                <input type="file" name="file" style="margin-bottom: 10px; width: 100%;">
                <button type="submit" class="btn btn-green btn-full">Upload (Secure)</button>
            </form>
            
            <div class="separator"><span>–ê–ë–û –û–ë–ï–†–Ü–¢–¨ –í–Ü–†–£–°</span></div>
            
            <form method="post" action="/upload_preset" class="ajax-form">
                <input type="hidden" name="mode" value="secure">
                <select name="filename" class="form-select">
                    {% for file in preset_files %}
                        <option value="{{ file }}">üß™ {{ file }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="btn btn-orange btn-full">Try Inject</button>
            </form>
        </div>
    </div>

    <div style="margin-top: 40px; text-align: center;">
        <h3 style="color: #7f8c8d; margin-bottom: 20px;">üëá –ü–ï–†–ï–ì–õ–Ø–î –†–ï–ó–£–õ–¨–¢–ê–¢–Ü–í üëá</h3>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
            
            <div class="box" style="border-top: 5px solid #e74c3c; padding: 40px; text-align: center; transition: transform 0.3s;">
                <h2 style="color: #c0392b; margin-top: 0; font-size: 24px;">üî¥ –í—Ä–∞–∑–ª–∏–≤–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ</h2>
                <p style="color: #666; margin-bottom: 25px;">
                    –¢—É—Ç –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –≤—Å—ñ —Å–∫—Ä–∏–ø—Ç–∏. <br>
                    <b>–û–±–µ—Ä–µ–∂–Ω–æ:</b> –º–æ–∂–µ –∑–∞–≤–∏—Å–Ω—É—Ç–∏ –∞–±–æ –≤–∫—Ä–∞—Å—Ç–∏ –∫—É–∫—ñ!
                </p>
                <a href="/vulnerable" target="_blank" class="btn btn-red" style="font-size: 20px; padding: 15px 30px; display: block; text-decoration: none;">
                    –í–Ü–î–ö–†–ò–¢–ò –í –û–ö–†–ï–ú–û–ú–£ –í–Ü–ö–ù–Ü üöÄ
                </a>
            </div>

            <div class="box" style="border-top: 5px solid #27ae60; padding: 40px; text-align: center; transition: transform 0.3s;">
                <h2 style="color: #1e8449; margin-top: 0; font-size: 24px;">üü¢ –ó–∞—Ö–∏—â–µ–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ</h2>
                <p style="color: #666; margin-bottom: 25px;">
                    –¢—É—Ç –ø—Ä–∞—Ü—é—î –∑–∞—Ö–∏—Å—Ç (Escaping). <br>
                    –°–∫—Ä–∏–ø—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —è–∫ —Ç–µ–∫—Å—Ç.
                </p>
                <a href="/secure" target="_blank" class="btn btn-green" style="font-size: 20px; padding: 15px 30px; display: block; text-decoration: none;">
                    –í–Ü–î–ö–†–ò–¢–ò –í –û–ö–†–ï–ú–û–ú–£ –í–Ü–ö–ù–Ü üõ°Ô∏è
                </a>
            </div>
            
        </div>
    </div>

</div>
{% endblock %}