{% extends 'base.html' %}

{% block content %}
<div style="max-width: 1000px; margin: 0 auto;">
    
    <div style="text-align: center; margin-bottom: 30px;">
        <h1 style="color: #2c3e50; margin-bottom: 10px;">üïµÔ∏è Blind SQL Injection</h1>
        <p style="color: #7f8c8d;">–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ª–∏—à–µ "–¢–∞–∫" –∞–±–æ "–ù—ñ". –ü–æ–º–∏–ª–∫–∏ –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ.</p>
    </div>

    <div class="box" style="border-top: 4px solid #2c3e50;">
        <h3 style="color: #2c3e50; margin-top:0;">üîç User Check (Boolean Based)</h3>
        <p style="font-size:13px;">–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –π–æ–≥–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å. –°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω'—î–∫—Ü—ñ—é, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ <b>TRUE</b> –≤—ñ–¥–ø–æ–≤—ñ–¥—å –¥–ª—è –Ω–µ–≤—ñ–¥–æ–º–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.</p>
        
        <form id="blind-form" class="ajax-form">
            <input type="text" name="username" placeholder="Check username (e.g. admin)" style="width: 100%; padding: 12px; margin-bottom: 15px; box-sizing: border-box; border: 2px solid #bdc3c7; border-radius: 4px; font-family: monospace; font-size: 16px;">
            <button type="submit" class="btn btn-blue btn-full" style="background: #2c3e50;">–ü–ï–†–ï–í–Ü–†–ò–¢–ò (TRUE/FALSE)</button>
        </form>

        <div id="blind-result" style="margin-top: 20px; text-align: center; font-weight: bold; min-height: 40px; padding: 10px; border-radius: 5px; background: #f9f9f9;">
            –û—á—ñ–∫—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É...
        </div>
    </div>

    <div class="box" style="border-top: 4px solid #95a5a6; background: #f4f6f7;">
        <h3 style="color: #7f8c8d; margin-top:0;">üí° –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?</h3>
        <p style="font-size: 13px; color: #555;">–°–µ—Ä–≤–µ—Ä –≤–∏–∫–æ–Ω—É—î –∑–∞–ø–∏—Ç:</p>
        <code style="background: #222; color: #e74c3c; padding: 5px; display: block; margin-bottom: 10px; border-radius: 3px;">SELECT * FROM users WHERE username = '<span style="color:yellow">INPUT</span>'</code>
        <p style="font-size: 13px; color: #555;">–Ø–∫—â–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —î ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è TRUE. –Ø–∫—â–æ –Ω–µ–º–∞—î (–∞–±–æ —Å—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞) ‚Äî FALSE.</p>
    </div>

</div>

<script>
    document.getElementById('blind-form').onsubmit = async (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);
        const resDiv = document.getElementById('blind-result');
        
        resDiv.innerHTML = "Checking...";
        resDiv.style.background = "#f9f9f9";
        
        try {
            const response = await fetch('/api/check_username', { method: 'POST', body: formData });
            const data = await response.json();
            
            if (data.exists) {
                resDiv.innerHTML = "<span style='color:#27ae60; font-size: 18px;'>‚úÖ User exists (TRUE)</span>";
                resDiv.style.background = "#d4efdf";
            } else {
                resDiv.innerHTML = "<span style='color:#c0392b; font-size: 18px;'>‚ùå User not found (FALSE)</span>";
                resDiv.style.background = "#fadbd8";
            }
        } catch (err) {
            resDiv.innerHTML = "Error connecting to server";
        }
    };
</script>
{% endblock %}